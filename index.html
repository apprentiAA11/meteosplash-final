<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>M√©t√©o Splash ‚Äì Pr√©visions m√©t√©o</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app-root">

      <!-- En-t√™te principal -->
      <header class="app-header">
        <div class="brand">
          <span class="brand-logo">üåà</span>
          <div class="brand-text">
            <h1>M√©t√©o Splash</h1>
            <p>Pr√©visions m√©t√©o</p>
          </div>
        </div>

        <div class="header-tools">
          <div class="radar-clock-wrapper">
            <span id="radar-clock" class="radar-clock">--:--</span>
          </div>
          <button id="btn-radar" class="pill-button header-button">üõ∞ Radar</button>
          <button id="btn-theme-toggle" class="pill-button header-button">üåì Auto</button>
          <button id="btn-geolocate" class="pill-button header-button">üìç Ma position</button>
          <button id="btn-speak" class="pill-button header-button">üó£ M√©t√©o parl√©e</button>
          <button id="btn-add-city" class="pill-button header-button header-add-city">+</button>
        </div>
      </header>

      <!-- Toast notifications -->
      <div id="toast" class="toast"></div>

      <!-- Fen√™tre radar -->
      <div id="radar-overlay" class="overlay hidden">
        <div class="overlay-backdrop"></div>
        <div class="overlay-panel radar-panel card glass-card">
          <header class="overlay-header">
            <div class="overlay-title-block">
              <h2>Radar m√©t√©o (v6.6-B)</h2>
              <p>Radar pluie (RainViewer), vent et temp√©ratures (Open-Meteo / OpenWeather)</p>
            </div>
            <button id="btn-close-radar" class="overlay-close">‚úï</button>
          </header>

          <div class="radar-layout">
            <div class="radar-main">
              <div id="radar-map" class="radar-map"></div>
              <div class="radar-bar">
                <div class="radar-bar-left">
                  <button id="radar-play" class="pill-button radar-play">‚ñ∂Ô∏é</button>
                  <div class="radar-window">
                    <span id="radar-window-text">Maintenant ‚Üí +12 h</span>
                  </div>
                </div>
                <div class="radar-bar-right">
                  <button id="radar-mode-toggle" class="pill-button radar-mode-toggle">
                    Radar r√©el
                  </button>
                </div>
              </div>
              <div class="radar-slider-row">
                <input
                  id="radar-timeline-slider"
                  class="radar-slider"
                  type="range"
                  min="0"
                  max="0"
                  value="0"
                />
              </div>
              <div class="radar-legend-row">
                <div id="legend-container" class="legend-container">
                  <div class="legend-group legend-rain" data-type="rain">
                    <span class="legend-title">Pluie</span>
                    <span class="legend-swatch rain-1"></span><span>Faible</span>
                    <span class="legend-swatch rain-2"></span><span>Mod√©r√©e</span>
                    <span class="legend-swatch rain-3"></span><span>Forte / Tr√®s forte</span>
                  </div>
                  <div class="legend-group legend-wind hidden" data-type="wind">
                    <span class="legend-title">Vent</span>
                    <span class="legend-swatch wind-1"></span><span>Faible</span>
                    <span class="legend-swatch wind-2"></span><span>Mod√©r√©</span>
                    <span class="legend-swatch wind-3"></span><span>Fort / Tr√®s fort</span>
                  </div>
                  <div class="legend-group legend-temp hidden" data-type="temp">
                    <span class="legend-title">Temp√©rature</span>
                    <span class="legend-swatch temp-1"></span><span>Tr√®s froid / Froid</span>
                    <span class="legend-swatch temp-2"></span><span>Doux / Chaud</span>
                    <span class="legend-swatch temp-3"></span><span>Tr√®s chaud</span>
                  </div>
                </div>
              </div>

              <div class="radar-grid-wrapper">
                <div id="radar-grid" class="radar-grid"></div>
              </div>
            </div>

            <aside class="radar-side">
              <div class="radar-summary card-subblock">
                <button class="pill-button radar-tab radar-tab-active" id="radar-tab-rain">
                  Pluie
                </button>
                <button class="pill-button radar-tab" id="radar-tab-wind">
                  Vent
                </button>
                <button class="pill-button radar-tab" id="radar-tab-temp">
                  Temp√©ratures
                </button>
              </div>

              <div class="radar-legend">
                <!-- Le bouton "R√©sum√© pluie -2 h" est inject√© en JS -->
              </div>
            </aside>
          </div>
        </div>
      </div>

      <!-- Overlay ajout de ville (popup) -->
      <div id="add-city-overlay" class="overlay overlay-add-city">
        <div class="overlay-backdrop"></div>
        <div class="overlay-panel add-city-panel card glass-card">
          <header class="overlay-header">
            <div class="overlay-title-block">
              <h2>Ajouter une ville</h2>
              <p>Recherche avanc√©e via l‚ÄôAPI de g√©ocodage Open-Meteo</p>
            </div>
            <button id="btn-close-add-city" class="overlay-close">‚úï</button>
          </header>
          <div id="add-city-popup-slot" class="add-city-popup-slot"></div>
        </div>
      </div>

      <!-- Sc√®ne de pluie en arri√®re-plan -->
      <div id="rain-scene" class="rain-scene"></div>

      <!-- Contenu principal -->
      <main class="layout">

        <!-- Colonne gauche -->
        <section class="column-left">
          
          <!-- Carte d√©tails -->
          <section class="card glass-card details-card">
            <header class="card-header">
              <div>
                <h2 id="details-title">Aucune ville s√©lectionn√©e</h2>
                <p id="details-subtitle" class="card-subtitle">Ajoute une ville ou ta position</p>
              </div>
              <button id="btn-24h" class="ghost-button history-button">üïí Pr√©visions 24h</button>
              <button id="btn-history" class="ghost-button history-button">üìú Historique</button>
            </header>

            <div id="timeline-24h" class="timeline-24h hidden"></div>
            <div id="details-current" class="details-grid"></div>
            <div id="details-history" class="detail-block hidden"></div>

            <div class="wind-block">
              <div id="wind-compass" class="wind-compass">
                <div class="compass-circle">
                  <span class="compass-label compass-n">N</span>
                  <span class="compass-label compass-e">E</span>
                  <span class="compass-label compass-s">S</span>
                  <span class="compass-label compass-w">O</span>
                  <div class="compass-arrow"></div>
                </div>
              </div>

              <div class="wind-info">
                <p id="wind-line-main" class="wind-main">Vent : ‚Äî</p>
                <p id="wind-line-sub" class="wind-sub">Rafales : ‚Äî</p>
              </div>      
            </div>

            <!-- üåÖüåá Lever / coucher du soleil -->
            <div class="sun-times-block">
              <div class="sun-item">
                <span class="sun-icon">üåÖ</span>
                <span id="sunrise-time">--:--</span>
              </div>
              <div class="sun-item">
                <span class="sun-icon">üåá</span>
                <span id="sunset-time">--:--</span>
              </div>
            </div>
          </section>

          <!-- Carte pr√©visions -->
          <section class="card glass-card forecast-card">
            <header class="card-header">
              <div>
                <h2>Pr√©visions</h2>
                <p class="card-subtitle">R√©sum√© des jours √† venir</p>
              </div>
              <div class="pill-switch">
                <button id="btn-forecast-7" class="pill-button pill-button-active">7 jours</button>
                <button id="btn-forecast-14" class="pill-button">14 jours</button>
              </div>
            </header>

            <div id="forecast-list" class="forecast-list"></div>
          </section>

          <!-- Overlay d√©tail par jour -->
          <div id="day-overlay" class="overlay day-overlay">
            <div class="overlay-backdrop"></div>
            <div class="overlay-panel card glass-card day-panel">
              <header class="overlay-header">
                <div class="overlay-title-block">
                  <h2 id="day-overlay-title">D√©tail journ√©e</h2>
                  <p id="day-overlay-subtitle" class="card-subtitle">Pr√©visions heure par heure</p>
                </div>
                <button id="btn-close-day" class="overlay-close">‚úï</button>
              </header>

              <div class="day-tabs">
                <button id="day-tab-temp" class="pill-button pill-button-active">Temp√©rature</button>
                <button id="day-tab-rain" class="pill-button">Pluie</button>
                <button id="day-tab-wind" class="pill-button">Vent</button>
                <button id="day-tab-humidity" class="pill-button">Humidit√©</button>
              </div>

              <div class="day-graphs">
                <canvas id="chart-temp" class="day-graph active-day-graph"></canvas>
                <canvas id="chart-rain" class="day-graph"></canvas>
                <canvas id="chart-wind" class="day-graph"></canvas>
                <canvas id="chart-humidity" class="day-graph"></canvas>
              </div>
            </div>
          </div>

        </section>

        <!-- Colonne droite -->
        <section class="column-right">

          <!-- Carte ajout de ville -->
          <section id="add-city-panel" class="card glass-card add-city-card">
            <header class="card-header">
              <div>
                <h2>Mes villes</h2>
                <p class="card-subtitle">Clique sur ‚ûï pour ajouter</p>
              </div>
              <div class="sort-block">
                <label for="sort-select">Tri</label>
                <select id="sort-select">
                  <option value="manual" selected>Manuel</option>
                  <option value="alpha">Alphab√©tique</option>
                  <option value="temp">Temp√©rature</option>
                </select>
              </div>
            </header>

            <div class="add-city-row">
              <input
                id="city-input"
                class="city-input"
                type="text"
                placeholder="Ajouter une ville..."
                autocomplete="off"
              />
              <ul id="autocomplete-list" class="autocomplete-list"></ul>
            </div>

            <div id="city-list" class="city-list"></div>

            <div class="add-city-footer">
              <button id="btn-reset" class="ghost-button reset-button">R√©initialiser</button>
              <div class="add-city-hint">
                <span>üìç</span>
                <span>Utilise ta position ou ajoute des villes manuellement.</span>
              </div>
            </div>
          </section>

          <!-- Conseil du jour -->
          <section class="card glass-card tip-card">
            <header class="card-header">
              <div>
                <h2>Conseil du jour</h2>
                <p class="card-subtitle">Petite astuce m√©t√©o personnalis√©e.</p>
              </div>
            </header>
            <p id="details-tip" class="tip-text">
              Ajoute une ville ou utilise la g√©olocalisation.
            </p>
          </section>

        </section>
      </main>
    </div>

    <script src="script.js"></script>
  </body>
</html>
