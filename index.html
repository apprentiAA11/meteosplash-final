<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>MÃ©tÃ©o Splash v6.6-B</title>

  <link rel="stylesheet" href="style.css"/>
  <script defer src="script.js"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>

<body class="theme-auto weather-clear">

<div class="rain-scene" id="rain-scene">
  <div id="storm-layer"></div>
  <div id="snow-layer"></div>
  <div id="sun-layer"></div>
</div>

<div class="app-shell">

<!-- =================== HEADER =================== -->
<header class="app-header glass-card">
  <div class="brand">
    <div class="brand-logo">ğŸŒˆ</div>
    <div class="brand-text">
      <h1>MÃ©tÃ©o Splash</h1>
      <p class="brand-tagline">PrÃ©visions mÃ©tÃ©o</p>
    </div>
  </div>

  <div class="header-right">
    <div class="header-buttons">
      <span class="radar-clock" id="radar-clock">--:--</span>
      <button class="icon-button" id="btn-radar">ğŸ›° Radar</button>
      <button class="icon-button theme-toggle" id="btn-theme-toggle">ğŸŒ“ Auto</button>
      <button class="icon-button location" id="btn-geolocate">ğŸ“ Ma position</button>
      <button class="icon-button speak" id="btn-speak">ğŸ—£ MÃ©tÃ©o parlÃ©e</button>
      <button class="icon-button add-city" id="btn-add-city" title="Ajouter une ville">â•</button>
    </div>
  </div>
</header>

<!-- ===================== MAIN ===================== -->
<main class="layout">

<!-- ===== Colonne gauche ===== -->
<section class="column-left">
  <section class="card glass-card details-card">
    <header class="card-header">
      <div>
        <h2 id="details-title">Aucune ville sÃ©lectionnÃ©e</h2>
        <p class="card-subtitle" id="details-subtitle">Ajoute une ville ou ta position</p>
      </div>

      <div class="details-actions">
        <button class="ghost-button history-button" id="btn-24h">ğŸ•’ PrÃ©visions 24h</button>
        <button class="ghost-button" id="btn-forecast">ğŸ“… PrÃ©visions 7/14 jours</button>
        <button class="ghost-button history-button" id="btn-history">ğŸ“œ Historique</button>
      </div>
    </header>

    <div class="timeline-24h hidden" id="timeline-24h"></div>
    <div class="details-grid" id="details-current"></div>
    <div class="detail-block hidden" id="details-history"></div>

    <div class="wind-block">
      <div class="wind-compass" id="wind-compass">
        <div class="compass-circle">
          <span class="compass-label compass-n">N</span>
          <span class="compass-label compass-e">E</span>
          <span class="compass-label compass-s">S</span>
          <span class="compass-label compass-w">O</span>
          <div class="compass-arrow"></div>
        </div>
      </div>
      <div class="wind-info">
        <p class="wind-main" id="wind-line-main">Vent : â€”</p>
        <p class="wind-sub" id="wind-line-sub">Rafales : â€”</p>
      </div>
    </div>

    <div class="sun-times">
      <div class="sun-item">ğŸŒ… <span id="sunrise-time">--:--</span></div>
      <div class="sun-item">ğŸŒ‡ <span id="sunset-time">--:--</span></div>
    </div>
  </section>
</section>

<!-- ===== Colonne droite ===== -->
<section class="column-right">

<!-- âœ… PANNEAU AJOUT DE VILLE (OBLIGATOIRE POUR LE JS) -->
<div class="add-city-panel hidden-merged" id="add-city-panel">
  <input
    type="text"
    id="city-input"
    class="ios-search-input"
    placeholder="Ajouter une ville..."
    autocomplete="off"
  />
  <ul class="autocomplete-list inline-autocomplete" id="autocomplete-list"></ul>
</div>

<section class="card glass-card cities-card">
  <header class="card-header">
    <div>
      <h2>Mes villes</h2>
      <p class="card-subtitle">Clique sur â• pour ajouter</p>
    </div>
  </header>
  <div class="city-list" id="city-list"></div>
  <div class="cities-footer">
    <button class="ghost-button danger" id="btn-reset">RÃ©initialiser</button>
  </div>
</section>

<section class="card glass-card tips-card">
  <h3>Conseil du jour</h3>
  <p class="hint" id="details-tip">Ajoute une ville ou utilise la gÃ©olocalisation.</p>
</section>

</section>
</main>

<!-- ================= OVERLAY PRÃ‰VISIONS ================= -->
<div class="day-overlay" id="forecast-overlay">
  <div class="overlay-backdrop"></div>
  <div class="overlay-card large">
    <header class="overlay-header">
      <h3>PrÃ©visions</h3>
      <button class="close-btn" id="close-forecast-overlay">âœ•</button>
    </header>

    <div class="forecast-toggle">
      <button id="btn-7j" class="active">7 jours</button>
      <button id="btn-14j">14 jours</button>
    </div>

    <div id="forecast-content">
      <canvas class="day-graph active-day-graph" id="chart-temp"></canvas>
      <canvas class="day-graph" id="chart-rain"></canvas>
      <canvas class="day-graph" id="chart-wind"></canvas>
      <canvas class="day-graph" id="chart-humidity"></canvas>
    </div>
  </div>
</div>

<footer class="app-footer">
  <p>MÃ©tÃ©o Splash Â· Bright Splash Studio Â· DonnÃ©es : <a href="https://open-meteo.com">Open-Meteo</a></p>
</footer>

<div class="toast" id="toast"></div>

</div>
</body>
</html>

